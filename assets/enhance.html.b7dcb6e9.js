import{r as n,o as s,a,b as t,w as e,F as p,c as o,d as c}from"./app.0d22f816.js";const l={},u=o('<h1 id="mptool-enhance" tabindex="-1"><a class="header-anchor" href="#mptool-enhance" aria-hidden="true">#</a> @mptool/enhance</h1><div class="custom-container tip"><p class="custom-container-title">提示</p><p>小程序增强框架，大小仅 6.56kB，同时支持 TS。</p><p>目前支持跨组件、页面通信，页面组件间引用和生命周期扩展</p><p>后续将支持 JS 解析与热更新。</p></div><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h2><p>你需要使用 <code>@mptool/enhance</code> 导出的 <code>$App</code>，<code>$Component</code> 和 <code>$Page</code> 进行应用、页面与组件注册。</p><h2 id="config" tabindex="-1"><a class="header-anchor" href="#config" aria-hidden="true">#</a> $Config</h2><p>用于配置小程序框架，请在 <code>app.js</code> 中于 <code>$App</code> 之前调用。</p>',6),i=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// app.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $App"),t("span",{class:"token punctuation"},","),c(" $Config "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Config"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your config here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$App"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your app options here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br")])],-1),r=t("div",{class:"language-javascript ext-js line-numbers-mode"},[t("pre",{class:"language-javascript"},[t("code",null,[t("span",{class:"token comment"},"// app.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $App"),t("span",{class:"token punctuation"},","),c(" $Config "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Config"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your config here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$App"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your app options here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br")])],-1),k=o('<h3 id="路由配置" tabindex="-1"><a class="header-anchor" href="#路由配置" aria-hidden="true">#</a> 路由配置</h3><p>由于小程序 JS 端没有读取 app.json 中配置路由的能力，小程序页面被推入页面栈前，小程序 JS 端也无法读取当前页面的路径，所以你需要配置小程序路由才可以让框架正常的工作。</p><p>我们提供了 <code>defaultRoute</code> 和 <code>routes</code> 两个选项来帮助你传递页面路由。</p><p>此外，框架引入了以下两个名词:</p><div class="custom-container tip"><p class="custom-container-title">页面简称</p><p>为了能够很方便的表示其他页面，你需要为每个页面配置一个页面简称。</p><p>页面简称应该是一个符合页面的单词或短语，不应包含 <code>/</code> 或空格</p></div><div class="custom-container tip"><p class="custom-container-title">路径模式</p><p>你可以使用路径模式来表达小程序页面简称与实际路径的对应关系。</p><p>你需要填写一个小程序路径表达式，并将页面名称出现的位置用 <code>$name</code> 替换。</p><p>比如当你给出 <code>/pages/$name/$name</code> 时，框架会将 <code>main</code> 页面简称会对应到 <code>/pages/main/main</code> 路径，同时将 <code>/pages/user/user</code> 路径的页面简称解析为 <code>user</code>。</p></div><p>你需要在 <code>defaultRoute</code> 填入一个页面模式，它表示在 <code>routes</code> 缺失或无法解析的情况下，对页面简称和页面路径的对应关系。换而言之，这是一个默认回退的选项。</p><p>当你具有特别简单的小程序结构并可以完全用 <code>defaultRoute</code> 表示时，你无需配置 <code>routes</code> 选项。但是当你具有复杂的小程序结构 (如分包) 时你可以通过两种方式配置 <code>routes</code> 选项:</p><ul><li><p>你可以直接以对象形式表示简称到路径的映射。如:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>\n  main<span class="token operator">:</span> <span class="token string">&#39;/pages/main/main&#39;</span><span class="token punctuation">,</span>\n  cart<span class="token operator">:</span> <span class="token string">&#39;/pages/cart/cart&#39;</span><span class="token punctuation">,</span>\n  user<span class="token operator">:</span> <span class="token string">&#39;/pages/user/user&#39;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>你也可以在页面复杂的情况下数组格式表示小程序路径映射，数组的元素有两种填写方式:</p><ul><li><p><code>[页面简称, 小程序路经]</code></p></li><li><p><code>[页面简称数组, 小程序路径模式]</code></p></li></ul><p>如:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span>\n  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;/pages/$name/$name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;details&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;order&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;/shop/$name/$name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token string">&quot;about&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/others/about/about&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>等效于:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>\n  <span class="token string">&#39;main&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/pages/main/main&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;cart&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/pages/cart/cart&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;user&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/pages/user/user&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;search&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/shop/search/search&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;details&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/shop/details/details&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;order&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/shop/order/order&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;about&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/others/about/about&#39;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul><p>请注意无法解析的路径会回退到 <code>defaultRoute</code>。</p><h3 id="跳转配置" tabindex="-1"><a class="header-anchor" href="#跳转配置" aria-hidden="true">#</a> 跳转配置</h3><p>由于框架的 <code>onNavigate</code> 生命周期会造成跳转延时，你可以通过 <code>maxDelay</code> 控制框架延迟跳转的最大时长，单位为 ms，默认为 <code>200</code>。</p><p>同时为了防止快速跳转触发额外生命周期导致的一些潜在问题 (诸如影响首屏渲染)，默认情况下，你只能在当前页面 <code>onReady</code> 生命周期触发之后再经过 100ms，才能通过框架进行下一次跳转。使用 <code>onReady</code> + <code>延时</code> 是为了保证首屏渲染完成，避免同步的 onNavigate 周期阻塞小程序渲染。如果你需要一个更大或者更小的延迟值，请通过 <code>minInterval</code> 设置。</p><h3 id="构造器扩展" tabindex="-1"><a class="header-anchor" href="#构造器扩展" aria-hidden="true">#</a> 构造器扩展</h3><p>你可以通过以下扩展方法为每个组件和页面注入实例方法或属性。</p><ul><li><p><code>extendComponent(componentOptions)</code> 用于扩展组件</p></li><li><p><code>extendPage(pageOptions)</code> 用于扩展页面</p></li><li><p><code>injectPage(componentOptions)</code> 用于为组件注入，在框架扩展之后执行，这意味着你可以覆盖框架注入的方法。</p></li><li><p><code>injectPage(pageOptions)</code> 用于为页面注入，在框架扩展之后执行，这意味着你可以覆盖框架注入的方法。</p></li></ul><h2 id="app" tabindex="-1"><a class="header-anchor" href="#app" aria-hidden="true">#</a> $App</h2><p>框架提供的应用注册器</p><h3 id="属性扩展" tabindex="-1"><a class="header-anchor" href="#属性扩展" aria-hidden="true">#</a> 属性扩展</h3>',19),d=t("code",null,"$emitter",-1),b=c(": 事件派发器，是一个 "),m={href:"https://github.com/developit/mitt",target:"_blank",rel:"noopener noreferrer"},g=c("mitt"),h=c(" 实例"),f=o('<h3 id="生命周期扩展" tabindex="-1"><a class="header-anchor" href="#生命周期扩展" aria-hidden="true">#</a> 生命周期扩展</h3><ul><li><p><code>onAwake(time: number)</code>: 在小程序从后台唤醒时调用</p><p>参数 <code>time</code> 为本次切入后台的时间，单位 ms</p></li></ul><h2 id="组件和页面通用的跳转方法" tabindex="-1"><a class="header-anchor" href="#组件和页面通用的跳转方法" aria-hidden="true">#</a> 组件和页面通用的跳转方法</h2><div class="custom-container warning"><p class="custom-container-title">注意</p><p>由于相对 url 的写法和夜间简称可能出现相同格式，框架不支持相对路径跳转，请一律使用页面简称或绝对路径</p></div><ul><li><p><code>$go(pagename: string): Promise&lt;WechatMiniprogram.NavigateToSuccessCallbackResult&gt;</code>: 导航到指定页面</p><p>本函数是 <code>wx.navigateTo</code> 的封装，<code>pagename</code> 可以带上 <code>queryString</code></p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$go</span><span class="token punctuation">(</span><span class="token string">&quot;play?vid=xxx&amp;cid=xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p><code>$redirect(pagename: string): Promise&lt;WechatMiniprogram.GeneralCallbackResult&gt;</code>: 重定向到指定页面, 即<strong>替换页面，不产生历史</strong></p><p>本函数是 <code>wx.redirectTo</code> 的封装，<code>pagename</code> 可以带上 <code>queryString</code></p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$redirect</span><span class="token punctuation">(</span><span class="token string">&quot;about?year=2021&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p><code>$switch(pagename: string): Promise&lt;WechatMiniprogram.GeneralCallbackResult&gt;</code>: 跳转到指定 tabBar 页面，并关闭其他所有非 tabBar 页面</p><p>本函数是 <code>wx.switchTab</code> 的封装，路径参数只用于触发 <code>onNavigate</code> (<code>wx.switchTab</code> 不支持参数)</p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token string">&quot;main?user=mrhope&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p><code>$reLaunch(pagename: string): Promise&lt;WechatMiniprogram.GeneralCallbackResult&gt;</code>: 关闭所有页面，之后打开到应用内的某个页面</p><p>本函数是 <code>wx.reLaunch</code> 的封装，<code>pagename</code> 可以带上 <code>queryString</code></p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$launch</span><span class="token punctuation">(</span><span class="token string">&quot;main?user=mrhope&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p><code>$back(delta = 1)</code>: 返回上一页</p><p>本函数是 <code>wx.navigateBack</code> 的简单封装，delta 为返回的层数，默认为<code>1</code></p></li><li><p><code>$preload(pagename: string)</code>: 提前预加载指定页面，即触发对应页面的 <code>onPreload</code> 生命周期</p><p>本函数是 <code>wx.navigateBack</code> 的简单封装，delta 为返回的层数，默认为<code>1</code></p></li><li><p>代理方法:</p><p><code>$bindGo</code>, <code>$bindRedirect</code>, <code>$bindSwitch</code> 和<code>$bindRelaunch</code> 是四个用在 WXML 的代理方法。</p><p>你需要使用 data-set 来绑定跳转配置</p><ul><li><code>data-url</code> 跳转到的页面名</li><li><code>data-before</code> 跳转前执行</li><li><code>data-after</code> 跳转后执行</li></ul><p>例子:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>\n  <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$bindRedirect<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/pages/play<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name">data-after</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClickAfter<span class="token punctuation">&quot;</span></span>\n<span class="token punctuation">&gt;</span></span>\n  click redirect\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>\n  <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$bindReLaunch<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/pages/play<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name">data-before</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClickBefore<span class="token punctuation">&quot;</span></span>\n<span class="token punctuation">&gt;</span></span>\n  click reLaunch\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul><h2 id="page" tabindex="-1"><a class="header-anchor" href="#page" aria-hidden="true">#</a> $Page</h2><p>框架提供的页面注册器，结构为 <code>$Page(name, options)</code>。</p><p>第一个参数为页面简称，第二个参数为页面选项。</p><p>如:</p>',9),v=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/index/index.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"main"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your config here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br")])],-1),$=t("div",{class:"language-javascript ext-js line-numbers-mode"},[t("pre",{class:"language-javascript"},[t("code",null,[t("span",{class:"token comment"},"// pages/index/index.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"main"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your config here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br")])],-1),y=t("h3",{id:"属性扩展-1",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#属性扩展-1","aria-hidden":"true"},"#"),c(" 属性扩展")],-1),w=o('<li><p><code>$name</code>: 当前页面名称</p></li><li><p><code>$state</code>: 框架生成的页面状态</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>你可以考虑将部分自定义扩展的数据注入到此处</p></div><ul><li><code>$state.firstOpen</code>: 是否是第一个打开的页面</li></ul></li>',2),q=t("code",null,"$emitter",-1),x=c(": 事件派发器，是一个 "),j={href:"https://github.com/developit/mitt",target:"_blank",rel:"noopener noreferrer"},P=c("mitt"),D=c(" 实例"),C=o('<li><p><code>$refs</code>: 指定了 <code>ref</code> 的子组件实例映射</p><p>示例:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-component1</span> <span class="token attr-name">binding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customComp1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-component2</span> <span class="token attr-name">binding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customComp2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>customComp1<span class="token punctuation">;</span> <span class="token comment">// custom-component1 子组件的实例引用</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>customComp2<span class="token punctuation">;</span> <span class="token comment">// custom-component2 子组件的实例引用</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li>',1),S=o('<h3 id="方法扩展" tabindex="-1"><a class="header-anchor" href="#方法扩展" aria-hidden="true">#</a> 方法扩展</h3><ul><li><p><code>$currentPage(): PageInstance</code>: 获取当前页面实例</p></li><li><p><code>$getName(url: string): string</code>: 获取传入页面地址的页面简称</p></li><li><p><code>$getPath(name: string): string</code>: 获取传入页面简称的页面路径</p></li><li><p><code>$</code>: 父子组件沟通器</p><p>用于通过 <code>binding=&quot;$&quot;</code> 形式建立父子组件/页面与组件沟通</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>我们这里做了一个优雅的 hack，实际上 <code>binding</code> 可以理解为 <code>bind:ing</code>，即框架向所有组件注入了 <code>ing</code> 事件并在内部调用它。</p></div></li></ul><h3 id="生命周期扩展-1" tabindex="-1"><a class="header-anchor" href="#生命周期扩展-1" aria-hidden="true">#</a> 生命周期扩展</h3>',3),L=o('<li><p><code>onRegister()</code>: 在页面即将注册时调用</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>此时页面的 this 还不可用</p></div></li><li><p><code>onAppLaunch(options: WechatMiniprogram.App.LaunchShowOption)</code>: 在 App.onLaunch 触发时调用</p><p>参数 <code>options</code> 为 App 启动时的 <code>onLaunch</code> 参数</p></li><li><p><code>onAwake(time: number)</code>: 在小程序从后台唤醒时调用</p><p>参数 <code>time</code> 为本次休眠时间，单位 ms</p></li>',3),R=o('<p><code>onPreload(options: PageQuery)</code>: 预加载</p><p>参数 <code>options</code> 为 url 参数对象</p><p>可在其他页面中使用 <code>this.$preload(pageNameWithArgs|pageUrl)</code> 触发特定页面的预加载周期。</p><div class="custom-container warning"><p class="custom-container-title">小程序分包</p><p>由于小程序每个分包下页面会在首次请求跳转到某个分包页面时注册，所以此时进入的首个页面无法触发 <code>onPreload</code> 周期。</p></div><p>你可以在用户特定行为后根据用户行为漏斗特点预加载对应界面准备数据。</p><p>例子:</p>',6),_=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/detail/detail.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"detail"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// ..."),c("\n\n  "),t("span",{class:"token comment"},"// 用户在商品页面加入了购物车，极有可能下单"),c("\n  "),t("span",{class:"token function"},"addCart"),t("span",{class:"token punctuation"},"("),c("itemID"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// ..."),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"$preload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"order?id="),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),c("itemID"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c(),t("span",{class:"token comment"},"// 通知订单页预加载此商品"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),N=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/order/order.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"order"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  data"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c("\n    loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},","),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onPreload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c(" id"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),c(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 此处 getData 可以为你自己的耗时逻辑"),c("\n    "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"="),c(" id"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("data "),t("span",{class:"token operator"},"="),c(" data"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onLoad"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c(" id"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),c(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 数据已经预加载"),c("\n    "),t("span",{class:"token keyword"},"if"),c(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"==="),c(" id"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 直接设置，跳过加载"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"else"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 自行获取"),c("\n      "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n        "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token comment"},"// ..."),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br")])],-1),A=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/detail/detail.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token keyword"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"detail"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// ..."),c("\n\n  "),t("span",{class:"token comment"},"// 用户在商品页面加入了购物车，极有可能下单"),c("\n  "),t("span",{class:"token function"},"addCart"),t("span",{class:"token punctuation"},"("),c("itemID"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// ..."),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"$preload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"order?id="),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),c("itemID"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c(),t("span",{class:"token comment"},"// 通知订单页预加载此商品"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),O=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/order/order.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token keyword"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"order"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  data"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c("\n    loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},","),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onPreload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 此处 getData 可以为你自己的耗时逻辑"),c("\n    "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"="),c(" id"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("data "),t("span",{class:"token operator"},"="),c(" data"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onLoad"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 数据已经预加载"),c("\n    "),t("span",{class:"token keyword"},"if"),c(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"==="),c(" id"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 直接设置，跳过加载"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"else"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 自行获取"),c("\n      "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n        "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token comment"},"// ..."),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br")])],-1),T=o('<p><code>onNavigate(options: PageQuery)</code>: 页面即将被跳转时触发</p><p>为触发 <code>onNavigate</code> 生命周期，跳转必须使用框架包装的方法:</p><ul><li><code>$go</code></li><li><code>$redirect</code></li><li><code>$switch</code></li><li><code>$reLaunch</code></li><li><code>$bindGo</code></li><li><code>$bindRedirect</code></li><li><code>$bindSwitch</code></li><li><code>$bindReLaunch</code></li></ul><p>参数 <code>options</code> 为 url 参数对象</p><p>使用包装方法进行跳转时吗，会先执行对应页面的 <code>onNavigate</code> 再进行跳转。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>由于同步或异步的 <code>onNavigate</code> 均受到支持，为了避免执行时间较长的方法阻塞跳转、迷惑用户，在达到 <code>maxDelay</code> 时长后框架会强制进行跳转，而不再等待 <code>onNavigate</code> 完成。</p><p>另外由于小程序每个分包下页面会在首次请求跳转到某个分包页面时注册，所以此时进入的首个页面无法触发 <code>onNavigate</code> 周期。</p></div><p>建议将低耗时 (&lt; 150ms) 的操作放入 <code>onNavigate</code> 周期，并在 <code>onLoad</code> 时判断 <code>onNavigate</code> 是否成功触发。</p><p>例子:</p>',8),I=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/detail/detail.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"detail"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// ..."),c("\n\n  "),t("span",{class:"token comment"},"// 用户在商品页面加入了购物车，极有可能下单"),c("\n  "),t("span",{class:"token function"},"addCart"),t("span",{class:"token punctuation"},"("),c("itemID"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// ..."),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"$go"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"order?id="),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),c("itemID"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c(),t("span",{class:"token comment"},"// 跳转到订单页"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),J=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/order/order.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"order"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  data"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c("\n    loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},","),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onNavigate"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c(" id"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),c(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("orderData "),t("span",{class:"token operator"},"="),c(),t("span",{class:"token function"},"prepareOrderData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"="),c(" id"),t("span",{class:"token punctuation"},";"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onLoad"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c(" id"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),c(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 数据已经处理完毕"),c("\n    "),t("span",{class:"token keyword"},"if"),c(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"==="),c(" id"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 直接设置，跳过加载"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" orderData "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"else"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 处理后赋值"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c("\n        loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c("\n        orderData"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token function"},"prepareOrderData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),c("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token comment"},"// ..."),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br")])],-1),G=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/detail/detail.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token keyword"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"detail"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// ..."),c("\n\n  "),t("span",{class:"token comment"},"// 用户在商品页面加入了购物车，极有可能下单"),c("\n  "),t("span",{class:"token function"},"addCart"),t("span",{class:"token punctuation"},"("),c("itemID"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// ..."),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"$go"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"order?id="),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),c("itemID"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c(),t("span",{class:"token comment"},"// 跳转到订单页"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),M=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/order/order.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token keyword"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"order"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  data"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c("\n    loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},","),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onNavigate"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("orderData "),t("span",{class:"token operator"},"="),c(),t("span",{class:"token function"},"prepareOrderData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"="),c(" id"),t("span",{class:"token punctuation"},";"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onLoad"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 数据已经处理完毕"),c("\n    "),t("span",{class:"token keyword"},"if"),c(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"==="),c(" id"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 直接设置，跳过加载"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" orderData "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"else"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 处理后赋值"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c("\n        loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c("\n        orderData"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token function"},"prepareOrderData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),c("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token comment"},"// ..."),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br")])],-1),W=o('<h2 id="component" tabindex="-1"><a class="header-anchor" href="#component" aria-hidden="true">#</a> $Component</h2><p>框架提供的组件注册器。</p><blockquote><p>TODO:　文档尚未制作完成</p></blockquote><h3 id="属性扩展-2" tabindex="-1"><a class="header-anchor" href="#属性扩展-2" aria-hidden="true">#</a> 属性扩展</h3><ul><li><p><code>$id</code>: 数字，当前组件的唯一标识</p></li><li><p><code>$refID</code>: 字符串，当前组件引用的 ref id，</p></li><li><p><code>$root</code>: 当前组件所属的页面组件实例</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>只在 <code>attached</code>, <code>ready</code> 生命周期后生效</p></div></li><li><p><code>$parent</code>: 当前组件所属的父组件或父页面实例</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>只在 <code>attached</code>, <code>ready</code> 生命周期后生效</p></div></li><li><p><code>$refs</code>: 指定了 ref 的子组件实例 Map，在父组件获取子组件引用</p><p>示例:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-component</span> <span class="token attr-name">binding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customRef1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  lifetimes<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function">attached</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>customComp<span class="token punctuation">;</span> <span class="token comment">// 根据ref属性获取子组件的实例引用</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul><h3 id="实例方法" tabindex="-1"><a class="header-anchor" href="#实例方法" aria-hidden="true">#</a> 实例方法</h3><ul><li><p><code>$call(method: string, ...args: unknown[]): void</code>: 通过消息的方式调用父组件方法，即使父组件方法不存在也不会报错</p><ul><li>参数 <code>method</code> 为需要调用的方法名称</li><li>参数 <code>args</code> 为需要传递的参数</li></ul></li></ul><h2 id="emitter" tabindex="-1"><a class="header-anchor" href="#emitter" aria-hidden="true">#</a> $Emitter</h2><blockquote><p>TODO:　文档尚未制作完成</p></blockquote>',9);l.render=function(o,c){const l=n("CodeGroupItem"),B=n("CodeGroup"),Q=n("OutboundLink");return s(),a(p,null,[u,t(B,null,{default:e((()=>[t(l,{title:"TypeScript"},{default:e((()=>[i])),_:1}),t(l,{title:"JavaScript"},{default:e((()=>[r])),_:1})])),_:1}),k,t("ul",null,[t("li",null,[d,b,t("a",m,[g,t(Q)]),h])]),f,t(B,null,{default:e((()=>[t(l,{title:"TypeScript"},{default:e((()=>[v])),_:1}),t(l,{title:"JavaScript"},{default:e((()=>[$])),_:1})])),_:1}),y,t("ul",null,[w,t("li",null,[t("p",null,[q,x,t("a",j,[P,t(Q)]),D])]),C]),S,t("ul",null,[L,t("li",null,[R,t(B,null,{default:e((()=>[t(l,{title:"商品详情页 (TS)"},{default:e((()=>[_])),_:1}),t(l,{title:"订单页 (TS)"},{default:e((()=>[N])),_:1}),t(l,{title:"商品详情页 (JS)"},{default:e((()=>[A])),_:1}),t(l,{title:"订单页 (JS)"},{default:e((()=>[O])),_:1})])),_:1})]),t("li",null,[T,t(B,null,{default:e((()=>[t(l,{title:"商品详情页 (TS)"},{default:e((()=>[I])),_:1}),t(l,{title:"订单页 (TS)"},{default:e((()=>[J])),_:1}),t(l,{title:"商品详情页 (JS)"},{default:e((()=>[G])),_:1}),t(l,{title:"订单页 (JS)"},{default:e((()=>[M])),_:1})])),_:1})])]),W],64)};export default l;
