import{r as n,o as s,a,b as t,w as e,F as p,c as o,d as c}from"./app.98214f4f.js";const l={},u=o('<h1 id="mptool-enhance" tabindex="-1"><a class="header-anchor" href="#mptool-enhance" aria-hidden="true">#</a> @mptool/enhance</h1><div class="custom-container tip"><p class="custom-container-title">提示</p><p>小程序增强框架，大小仅 6.56kB。</p><p>目前支持跨组件、页面通信，页面组件间引用和生命周期扩展</p><p>后续将支持 JS 解析与热更新。</p></div><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h2><p>你需要使用 <code>@mptool/enhance</code> 导出的 <code>$App</code>，<code>$Component</code> 和 <code>$Page</code> 进行应用、页面与组件注册。</p><h2 id="config" tabindex="-1"><a class="header-anchor" href="#config" aria-hidden="true">#</a> $Config</h2><p>用于配置小程序框架，请在 <code>app.js</code> 中于 <code>$App</code> 之前调用。</p>',6),i=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// app.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $App"),t("span",{class:"token punctuation"},","),c(" $Config "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Config"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your config here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$App"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your app options here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br")])],-1),r=t("div",{class:"language-javascript ext-js line-numbers-mode"},[t("pre",{class:"language-javascript"},[t("code",null,[t("span",{class:"token comment"},"// app.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $App"),t("span",{class:"token punctuation"},","),c(" $Config "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Config"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your config here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$App"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your app options here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br")])],-1),k=o('<h3 id="路由配置" tabindex="-1"><a class="header-anchor" href="#路由配置" aria-hidden="true">#</a> 路由配置</h3><p>由于小程序 JS 端没有读取 app.json 中配置路由的能力，小程序页面被推入页面栈前，小程序 JS 端也无法读取当前页面的路径，所以你需要配置小程序路由才可以让框架正常的工作。</p><p>我们提供了 <code>defaultRoute</code> 和 <code>routes</code> 两个选项来帮助你传递页面路由。</p><p>此外，框架引入了以下两个名词:</p><div class="custom-container tip"><p class="custom-container-title">页面简称</p><p>为了能够很方便的表示其他页面，你需要为每个页面配置一个页面简称。</p><p>页面简称应该是一个符合页面的单词或短语，不应包含 <code>/</code> 或空格</p></div><div class="custom-container tip"><p class="custom-container-title">路径模式</p><p>你可以使用路径模式来表达小程序页面简称与实际路径的对应关系。</p><p>你需要填写一个小程序路径表达式，并将页面名称出现的位置用 <code>$name</code> 替换。</p><p>比如当你给出 <code>/pages/$name/$name</code> 时，框架会将 <code>main</code> 页面简称会对应到 <code>/pages/main/main</code> 路径，同时将 <code>/pages/user/user</code> 路径的页面简称解析为 <code>user</code>。</p></div><p>你需要在 <code>defaultRoute</code> 填入一个页面模式，它表示在 <code>routes</code> 缺失或无法解析的情况下，对页面简称和页面路径的对应关系。换而言之，这是一个默认回退的选项。</p><p>当你具有特别简单的小程序结构并可以完全用 <code>defaultRoute</code> 表示时，你无需配置 <code>routes</code> 选项。但是当你具有复杂的小程序结构 (如分包) 时你可以通过两种方式配置 <code>routes</code> 选项:</p><ul><li><p>你可以直接以对象形式表示简称到路径的映射。如:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>\n  main<span class="token operator">:</span> <span class="token string">&#39;/pages/main/main&#39;</span><span class="token punctuation">,</span>\n  cart<span class="token operator">:</span> <span class="token string">&#39;/pages/cart/cart&#39;</span><span class="token punctuation">,</span>\n  user<span class="token operator">:</span> <span class="token string">&#39;/pages/user/user&#39;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>你也可以在页面复杂的情况下数组格式表示小程序路径映射，数组的元素有两种填写方式:</p><ul><li><p><code>[页面简称, 小程序路经]</code></p></li><li><p><code>[页面简称数组, 小程序路径模式]</code></p></li></ul><p>如:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span>\n  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;/pages/$name/$name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;details&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;order&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;/shop/$name/$name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token string">&quot;about&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/others/about/about&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>等效于:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>\n  <span class="token string">&#39;main&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/pages/main/main&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;cart&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/pages/cart/cart&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;user&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/pages/user/user&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;search&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/shop/search/search&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;details&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/shop/details/details&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;order&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/shop/order/order&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;about&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/others/about/about&#39;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul><p>请注意无法解析的路径会回退到 <code>defaultRoute</code>。</p><h3 id="构造器扩展" tabindex="-1"><a class="header-anchor" href="#构造器扩展" aria-hidden="true">#</a> 构造器扩展</h3><p>你可以通过以下扩展方法为每个组件和页面注入实例方法或属性。</p><ul><li><p><code>extendComponent(componentOptions)</code> 用于扩展组件</p></li><li><p><code>extendPage(pageOptions)</code> 用于扩展页面</p></li><li><p><code>injectPage(componentOptions)</code> 用于为组件注入，在框架扩展之后执行，这意味着你可以覆盖框架注入的方法。</p></li><li><p><code>injectPage(pageOptions)</code> 用于为页面注入，在框架扩展之后执行，这意味着你可以覆盖框架注入的方法。</p></li></ul><h2 id="app" tabindex="-1"><a class="header-anchor" href="#app" aria-hidden="true">#</a> $App</h2><p>框架提供的应用注册器</p><h3 id="属性扩展" tabindex="-1"><a class="header-anchor" href="#属性扩展" aria-hidden="true">#</a> 属性扩展</h3>',16),b=t("code",null,"$emitter",-1),m=c(": 事件派发器，是一个 "),d={href:"https://github.com/developit/mitt",target:"_blank",rel:"noopener noreferrer"},g=c("mitt"),h=c(" 实例"),f=o('<h3 id="生命周期扩展" tabindex="-1"><a class="header-anchor" href="#生命周期扩展" aria-hidden="true">#</a> 生命周期扩展</h3><ul><li><p><code>onAwake(time: number)</code>: 在小程序从后台唤醒时调用</p><p>参数 <code>time</code> 为本次切入后台的时间，单位 ms</p></li></ul><h2 id="page" tabindex="-1"><a class="header-anchor" href="#page" aria-hidden="true">#</a> $Page</h2><p>框架提供的页面注册器，结构为 <code>$Page(name, options)</code>。</p><p>第一个参数为页面简称，第二个参数为页面选项。</p><p>如:</p>',6),y=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/index/index.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"main"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your config here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br")])],-1),v=t("div",{class:"language-javascript ext-js line-numbers-mode"},[t("pre",{class:"language-javascript"},[t("code",null,[t("span",{class:"token comment"},"// pages/index/index.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"main"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// your config here"),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br")])],-1),$=t("h3",{id:"属性扩展-1",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#属性扩展-1","aria-hidden":"true"},"#"),c(" 属性扩展")],-1),w=o('<li><p><code>$name</code>: 当前页面名称</p></li><li><p><code>$state</code>: 框架生成的页面状态</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>你可以考虑将部分自定义扩展的数据注入到此处</p></div><ul><li><code>$state.firstOpen</code>: 是否是第一个打开的页面</li></ul></li>',2),q=t("code",null,"$emitter",-1),x=c(": 事件派发器，是一个 "),P={href:"https://github.com/developit/mitt",target:"_blank",rel:"noopener noreferrer"},j=c("mitt"),D=c(" 实例"),_=o('<li><p><code>$refs</code>: 指定了 <code>ref</code> 的子组件实例映射</p><p>示例:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-component1</span> <span class="token attr-name">binding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customComp1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-component2</span> <span class="token attr-name">binding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customComp2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Page<span class="token punctuation">.</span><span class="token constant">P</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>customComp1<span class="token punctuation">;</span> <span class="token comment">// custom-component1 子组件的实例引用</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>customComp2<span class="token punctuation">;</span> <span class="token comment">// custom-component2 子组件的实例引用</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li>',1),C=o('<h3 id="方法扩展" tabindex="-1"><a class="header-anchor" href="#方法扩展" aria-hidden="true">#</a> 方法扩展</h3><ul><li><p><code>$</code>: 父子组件沟通器</p><p>用于以 <code>binding=&quot;$&quot;</code> 形式建立父子组件/页面与组件沟通</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>我们这里做了一个优雅的 hack，实际上 <code>binding</code> 可以理解为 <code>bind:ing</code>，即框架向所有组件注入了 <code>ing</code> 事件并在内部调用它。</p></div></li></ul><h3 id="生命周期扩展-1" tabindex="-1"><a class="header-anchor" href="#生命周期扩展-1" aria-hidden="true">#</a> 生命周期扩展</h3>',3),S=o('<li><p><code>onRegister()</code>: 在页面即将注册时调用</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>此时页面的 this 还不可用</p></div></li><li><p><code>onAwake(time: number)</code>: 在小程序从后台唤醒时调用</p><p>参数 <code>time</code> 为本次休眠时间，单位 ms</p></li>',2),A=t("p",null,[t("code",null,"onPreload(options: PageQuery)"),c(": 预加载")],-1),I=t("p",null,[c("参数 "),t("code",null,"options"),c(" 为 url 参数对象")],-1),J=t("p",null,[c("可在其他页面中使用 "),t("code",null,"this.$preload(pageNameWithArgs|pageUrl)"),c(" 触发特定页面的预加载周期。")],-1),L=t("p",null,"你可以在用户特定行为后根据用户行为漏斗特点预加载对应界面准备数据。",-1),O=t("p",null,"例子:",-1),R=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/detail/detail.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"detail"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// ..."),c("\n\n  "),t("span",{class:"token comment"},"// 用户在商品页面加入了购物车，极有可能下单"),c("\n  "),t("span",{class:"token function"},"addCart"),t("span",{class:"token punctuation"},"("),c("itemID"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// ..."),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"$preload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"order?id="),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),c("itemID"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c(),t("span",{class:"token comment"},"// 通知订单页预加载此商品"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),T=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/order/order.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"order"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  data"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c("\n    loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},","),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onPreload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c(" id"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),c(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 此处 getData 可以为你自己的耗时逻辑"),c("\n    "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"="),c(" id"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("data "),t("span",{class:"token operator"},"="),c(" data"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onLoad"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c(" id"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),c(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 数据已经预加载"),c("\n    "),t("span",{class:"token keyword"},"if"),c(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"==="),c(" id"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 直接设置，跳过加载"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"else"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 自行获取"),c("\n      "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n        "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token comment"},"// ..."),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br")])],-1),N=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/detail/detail.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token keyword"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"detail"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// ..."),c("\n\n  "),t("span",{class:"token comment"},"// 用户在商品页面加入了购物车，极有可能下单"),c("\n  "),t("span",{class:"token function"},"addCart"),t("span",{class:"token punctuation"},"("),c("itemID"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// ..."),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"$preload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"order?id="),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),c("itemID"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c(),t("span",{class:"token comment"},"// 通知订单页预加载此商品"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),G=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/order/order.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token keyword"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"order"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  data"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c("\n    loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},","),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onPreload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 此处 getData 可以为你自己的耗时逻辑"),c("\n    "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"="),c(" id"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("data "),t("span",{class:"token operator"},"="),c(" data"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onLoad"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 数据已经预加载"),c("\n    "),t("span",{class:"token keyword"},"if"),c(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"==="),c(" id"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 直接设置，跳过加载"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"else"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 自行获取"),c("\n      "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n        "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token comment"},"// ..."),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br")])],-1),Q=o('<p><code>onNavigate(options: PageQuery)</code>: 页面即将被跳转时触发</p><p>为触发 <code>onNavigate</code> 生命周期，跳转必须使用框架包装的方法:</p><ul><li><code>$go</code></li><li><code>$redirect</code></li><li><code>$switch</code></li><li><code>$reLaunch</code></li><li><code>$bindGo</code></li><li><code>$bindRedirect</code></li><li><code>$bindSwitch</code></li><li><code>$bindReLaunch</code></li></ul><p>参数 <code>options</code> 为 url 参数对象</p><p>使用包装方法进行跳转时吗，会先执行对应页面的 <code>onNavigate</code> 再进行跳转。</p><p>你可以将低耗时 (建议 &lt; 150ms) 的操作放入 <code>onNavigate</code> 周期。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>请注意 <code>onNavigate</code> 周期会阻塞页面的跳转直至其完成。</p><p>所以为了放置给用于如果你需要执行异步操作</p></div><p>例子:</p>',8),B=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/detail/detail.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"detail"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// ..."),c("\n\n  "),t("span",{class:"token comment"},"// 用户在商品页面加入了购物车，极有可能下单"),c("\n  "),t("span",{class:"token function"},"addCart"),t("span",{class:"token punctuation"},"("),c("itemID"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// ..."),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"$preload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"order?id="),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),c("itemID"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c(),t("span",{class:"token comment"},"// 通知订单页预加载此商品"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),F=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/order/order.ts"),c("\n"),t("span",{class:"token keyword"},"import"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"from"),c(),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"order"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  data"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c("\n    loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},","),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onPreload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c(" id"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),c(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 此处 getData 可以为你自己的耗时逻辑"),c("\n    "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"="),c(" id"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("data "),t("span",{class:"token operator"},"="),c(" data"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onLoad"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c(" id"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token builtin"},"string"),c(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 数据已经预加载"),c("\n    "),t("span",{class:"token keyword"},"if"),c(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"==="),c(" id"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 直接设置，跳过加载"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"else"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 自行获取"),c("\n      "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n        "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token comment"},"// ..."),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br")])],-1),U=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/detail/detail.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token keyword"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"detail"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  "),t("span",{class:"token comment"},"// ..."),c("\n\n  "),t("span",{class:"token comment"},"// 用户在商品页面加入了购物车，极有可能下单"),c("\n  "),t("span",{class:"token function"},"addCart"),t("span",{class:"token punctuation"},"("),c("itemID"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// ..."),c("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"$preload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"order?id="),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),c("itemID"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c(),t("span",{class:"token comment"},"// 通知订单页预加载此商品"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),W=t("div",{class:"language-typescript ext-ts line-numbers-mode"},[t("pre",{class:"language-typescript"},[t("code",null,[t("span",{class:"token comment"},"// pages/order/order.js"),c("\n"),t("span",{class:"token keyword"},"const"),c(),t("span",{class:"token punctuation"},"{"),c(" $Page "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token operator"},"="),c(),t("span",{class:"token keyword"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"@mptool/enhance"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n\n"),t("span",{class:"token function"},"$Page"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"order"'),t("span",{class:"token punctuation"},","),c(),t("span",{class:"token punctuation"},"{"),c("\n  data"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token punctuation"},"{"),c("\n    loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},","),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onPreload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 此处 getData 可以为你自己的耗时逻辑"),c("\n    "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"="),c(" id"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("data "),t("span",{class:"token operator"},"="),c(" data"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token function"},"onLoad"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" id "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n    "),t("span",{class:"token comment"},"// 数据已经预加载"),c("\n    "),t("span",{class:"token keyword"},"if"),c(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),c("$state"),t("span",{class:"token punctuation"},"."),c("id "),t("span",{class:"token operator"},"==="),c(" id"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 直接设置，跳过加载"),c("\n      "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c(),t("span",{class:"token keyword"},"else"),c(),t("span",{class:"token punctuation"},"{"),c("\n      "),t("span",{class:"token comment"},"// 自行获取"),c("\n      "),t("span",{class:"token function"},"getData"),t("span",{class:"token punctuation"},"("),c("id"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),c("data"),t("span",{class:"token punctuation"},")"),c(),t("span",{class:"token operator"},"=>"),c(),t("span",{class:"token punctuation"},"{"),c("\n        "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),c(" loading"),t("span",{class:"token operator"},":"),c(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),c(" data "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n    "),t("span",{class:"token punctuation"},"}"),c("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),c("\n\n  "),t("span",{class:"token comment"},"// ..."),c("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),c("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br")])],-1),z=t("blockquote",null,[t("p",null,"TODO:　文档尚未制作完成")],-1);l.render=function(o,c){const l=n("CodeGroupItem"),E=n("CodeGroup"),H=n("OutboundLink");return s(),a(p,null,[u,t(E,null,{default:e((()=>[t(l,{title:"TypeScript"},{default:e((()=>[i])),_:1}),t(l,{title:"JavaScript"},{default:e((()=>[r])),_:1})])),_:1}),k,t("ul",null,[t("li",null,[b,m,t("a",d,[g,t(H)]),h])]),f,t(E,null,{default:e((()=>[t(l,{title:"TypeScript"},{default:e((()=>[y])),_:1}),t(l,{title:"JavaScript"},{default:e((()=>[v])),_:1})])),_:1}),$,t("ul",null,[w,t("li",null,[t("p",null,[q,x,t("a",P,[j,t(H)]),D])]),_]),C,t("ul",null,[S,t("li",null,[A,I,J,L,O,t(E,null,{default:e((()=>[t(l,{title:"商品详情页 (TS)"},{default:e((()=>[R])),_:1}),t(l,{title:"订单页 (TS)"},{default:e((()=>[T])),_:1}),t(l,{title:"商品详情页 (JS)"},{default:e((()=>[N])),_:1}),t(l,{title:"订单页 (JS)"},{default:e((()=>[G])),_:1})])),_:1})]),t("li",null,[Q,t(E,null,{default:e((()=>[t(l,{title:"商品详情页 (TS)"},{default:e((()=>[B])),_:1}),t(l,{title:"订单页 (TS)"},{default:e((()=>[F])),_:1}),t(l,{title:"商品详情页 (JS)"},{default:e((()=>[U])),_:1}),t(l,{title:"订单页 (JS)"},{default:e((()=>[W])),_:1})])),_:1})])]),z],64)};export default l;
